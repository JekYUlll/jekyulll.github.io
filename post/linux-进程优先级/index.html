<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>[linux] 进程优先级 - HOREB EVAN JEKYULLL BLOG</title>
<meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="JekYUlll"><meta name=description content="图解Linux进程优先级 实时优先级用于实时应用程序，如硬实时任务和实时控制系统，而普通优先级用于非实时应用程序。
实时进程：动态优先级为0-99的进程，采用实时调度算法调度。 普通进程：动态优先级为100-139的进程，采用完全公平调度算法调度。 Linux进程调度之完全公平调度（压箱底的干货分享）。完全公平调度，CFS (Completely Fair Scheduler) 。
"><meta name=keywords content="JekYUlll,theme,even"><meta name=generator content="Hugo 0.140.0 with theme even"><link rel=canonical href=https://jekyulll.github.io/post/linux-%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:url" content="https://jekyulll.github.io/post/linux-%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7/"><meta property="og:site_name" content="HOREB EVAN JEKYULLL BLOG"><meta property="og:title" content="[linux] 进程优先级"><meta property="og:description" content="图解Linux进程优先级 实时优先级用于实时应用程序，如硬实时任务和实时控制系统，而普通优先级用于非实时应用程序。
实时进程：动态优先级为0-99的进程，采用实时调度算法调度。 普通进程：动态优先级为100-139的进程，采用完全公平调度算法调度。 Linux进程调度之完全公平调度（压箱底的干货分享）。完全公平调度，CFS (Completely Fair Scheduler) 。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-11-04T21:05:47+08:00"><meta property="article:modified_time" content="2024-11-04T21:05:47+08:00"><meta property="article:tag" content="Linux"><meta itemprop=name content="[linux] 进程优先级"><meta itemprop=description content="图解Linux进程优先级 实时优先级用于实时应用程序，如硬实时任务和实时控制系统，而普通优先级用于非实时应用程序。
实时进程：动态优先级为0-99的进程，采用实时调度算法调度。 普通进程：动态优先级为100-139的进程，采用完全公平调度算法调度。 Linux进程调度之完全公平调度（压箱底的干货分享）。完全公平调度，CFS (Completely Fair Scheduler) 。"><meta itemprop=datePublished content="2024-11-04T21:05:47+08:00"><meta itemprop=dateModified content="2024-11-04T21:05:47+08:00"><meta itemprop=wordCount content="817"><meta itemprop=keywords content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="[linux] 进程优先级"><meta name=twitter:description content="图解Linux进程优先级 实时优先级用于实时应用程序，如硬实时任务和实时控制系统，而普通优先级用于非实时应用程序。
实时进程：动态优先级为0-99的进程，采用实时调度算法调度。 普通进程：动态优先级为100-139的进程，采用完全公平调度算法调度。 Linux进程调度之完全公平调度（压箱底的干货分享）。完全公平调度，CFS (Completely Fair Scheduler) 。"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>HOREB</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>HOREB</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>[linux] 进程优先级</h1><div class=post-meta><span class=post-time>2024-11-04 </span><span class=more-meta>817 words </span><span class=more-meta>2 mins read</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><ul><li></li></ul></li></ul></li></ul></nav></div></div><div class=post-content><h5 id=图解linux进程优先级httpsmpweixinqqcoms__bizmzkyndiynzu4mgmid2247484435idx1snb6f30489cf388f1024d6883abb8237c8chksmc1d84682f6afcf94c1af14678d5401d558d2b728f0e6c853dbe4efe02c12dfa147369ceee13frd><a href="https://mp.weixin.qq.com/s?__biz=MzkyNDIyNzU4Mg==&amp;mid=2247484435&amp;idx=1&amp;sn=b6f30489cf388f1024d6883abb8237c8&amp;chksm=c1d84682f6afcf94c1af14678d5401d558d2b728f0e6c853dbe4efe02c12dfa147369ceee13f#rd">图解Linux进程优先级</a></h5><p><em>实时优先级</em>用于实时应用程序，如硬实时任务和实时控制系统，而<em>普通优先级</em>用于非实时应用程序。</p><ul><li><strong>实时进程</strong>：动态优先级为0-99的进程，采用<em>实时调度算法</em>调度。</li><li><strong>普通进程</strong>：动态优先级为100-139的进程，采用<em>完全公平调度算法</em>调度。</li></ul><p><a href="https://mp.weixin.qq.com/s?__biz=MzkyNDIyNzU4Mg==&amp;mid=2247484458&amp;idx=1&amp;sn=e4e64c006d4d822c6e7c184ab50540c1&amp;chksm=c1d846bbf6afcfad20af0a7132eca1e3fd3c765ea5d4ee4134985b2b03f2461c207239fcc208#rd">Linux进程调度之完全公平调度（压箱底的干货分享）</a>。完全公平调度，CFS (Completely Fair Scheduler) 。</p><p><strong>nice值</strong>：是用于调整普通进程优先级的参数。范围：<code>-20</code>-<code>19</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>task_struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>......</span>
</span></span><span class=line><span class=cl><span class=kt>int</span>             <span class=n>prio</span><span class=p>;</span> 			<span class=c1>// prio（动态优先级）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span>             <span class=n>static_prio</span><span class=p>;</span>	<span class=c1>// static_prio（静态优先级）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span>             <span class=n>normal_prio</span><span class=p>;</span>	<span class=c1>// normal_prio（归一化优先级）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>unsigned</span> <span class=kt>int</span>    <span class=n>rt_priority</span><span class=p>;</span> 	<span class=c1>// rt_priority（实时优先级）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><ol><li><code>prio</code>（动态优先级）<br>动态优先级，有效优先级，调度器最终使用的优先级数值，范围0-139，值越小，优先级越高。</li><li><code>static_prio</code>（静态优先级）<br>静态优先级，采用<code>SCHED_NORMAL</code>和<code>SCHED_BATCH</code>调度策略的进程（即普通进程）用于计算动态优先级的，范围100-139。
prio = static_prio = nice + DEFAULT_PRIO = nice + 120</li><li><code>normal_prio</code>（归一化优先级）<br>用于计算<code>prio</code>的中间变量，不需要太关心。</li><li><code>rt_priority</code>（实时优先级）<br>实时优先级，采用<code>SCHED_FIFO</code>和<code>SCHED_RR</code>调度策略进程（即实时进程）用于计算动态优先级，范围0-99。
prio = MAX_RT_PRIO - 1 - rt_prio = 100 - 1 - rt_priority;</li></ol><p>实时优先级数值越大，得到的动态优先级数值越小，优先级越高。</p><p><code>ps -elf</code>命令查看进程优先级。<code>PRI</code>：进程优先级，数值越小，优先级越高。（并非动态优先级）<code>NI</code>：nice值。</p><p><code>SCHED_FIFO</code>（先进先出调度）和<code>SCHED_RR</code>（时间片轮转调度），这些策略可以通过<code>sched_setscheduler()</code>系统调用（头文件<code>&lt;sched.h></code>）来设置：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>sched_param</span> <span class=n>param</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置优先级为最高优先级
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>param</span><span class=p>.</span><span class=n>sched_priority</span> <span class=o>=</span> <span class=n>sched_get_priority_max</span><span class=p>(</span><span class=n>SCHED_FIFO</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置调度策略为SCHED_FIFO
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=n>sched_setscheduler</span><span class=p>(</span><span class=n>getpid</span><span class=p>(),</span> <span class=n>SCHED_FIFO</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>param</span><span class=p>)</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;无法设置实时调度策略&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>JekYUlll</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2024-11-04</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/linux/>linux</a></div><nav class=post-nav><a class=prev href=/post/database-%E8%A1%A8%E6%A0%BC%E5%B1%95%E7%A4%BA-mysql-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">[database] 表格展示 MySQL 基础数据类型.md</span>
<span class="prev-text nav-mobile">Prev</span>
</a><a class=next href=/post/linux-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/><span class="next-text nav-default">[linux] 文件系统与虚拟文件系统</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:jekyulll@gmail.com class="iconfont icon-email" title=email></a><a href=https://github.com/JekYUlll class="iconfont icon-github" title=github></a><a href=https://www.zhihu.com/people/yu-bei-28-33 class="iconfont icon-zhihu" title=zhihu></a><a href=https://space.bilibili.com/11060371 class="iconfont icon-bilibili" title=bilibili></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span><span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span><span class=copyright-year>&copy;
2024<span class=heart><i class="iconfont icon-heart"></i></span><span></span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="en".replace(/-/g,"_").replace(/_(.*)/,function(e,t){return e.replace(t,t.toUpperCase())});timeago().render(document.querySelectorAll(".timeago"),languageCode),timeago.cancel()</script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q6473FXND4"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Q6473FXND4")}</script></body></html>